this.ckan=this.ckan||{},function(t,n,e){function i(t,e,i){this.el=t instanceof n?t:n(t),this.options=n.extend(!0,{},this.options,e),this.sandbox=i}function a(e,o){if(a.registry[e])throw new Error('There is already a module registered as "'+e+'"');return"function"==typeof o&&(o=o(n,t.i18n.translate,t.i18n)),o=n.extend({constructor:function(){i.apply(this,arguments)}},o),a.registry[e]=n.inherit(i,o,{namespace:e}),t}n.extend(i.prototype,{el:null,options:null,$:function(t){return this.el.find(t)},i18n:function(t){var n=[].slice.call(arguments,1),e=this.options.i18n,i=e&&e[t]||t;return"function"==typeof i&&(i=i.apply(null,n)),"function"==typeof i.fetch?i.fetch.apply(i,n):i},_:function(){return t.i18n._.apply(t.i18n,arguments)},ngettext:function(){return t.i18n.ngettext.apply(t.i18n,arguments)},initialize:function(){},teardown:function(){},remove:function(){this.teardown(),this.el.remove()}}),a.registry={},a.instances={},a.initialize=function(){return t.pubsub.enqueue(),n("[data-module]",document.body).each((function(t,n){a.initializeElement(this)})),t.pubsub.dequeue(),a},a.initializeElement=function(t){var e=a.registry,i=n.trim(t.getAttribute("data-module")).split(" ");n.each(i,(function(n,i){var o=e[i];o&&"function"==typeof o&&a.createInstance(o,t)}))},a.createInstance=function(n,e){var i=a.extractOptions(e),o=new n(e,i,t.sandbox(e,i));"function"==typeof o.initialize&&o.initialize();var u=a.instances[n.namespace]||[];u.push(o),a.instances[n.namespace]=u},a.extractOptions=function(t){for(var e,i,a,o=t.attributes,u=0,r=o.length,s={};u<r;u+=1)if(0===(i=o[u]).name.indexOf("data-module-")){e=i.name.slice("data-module-".length);try{a=""===i.value||n.parseJSON(i.value)}catch(t){a=i.value}s[n.camelCase(e)]=a}return s},t.module=a,t.module.BaseModule=i}(this.ckan,this.jQuery);