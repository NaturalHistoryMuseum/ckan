this.ckan.module("followers-counter",(function(o){"use strict";return{options:{id:null,num_followers:0},initialize:function(){o.proxyAll(this,/_on/),this.counterEl=this.$("span"),this.objId=this.options.id,this.sandbox.subscribe("follow-follow-"+this.objId,this._onFollow),this.sandbox.subscribe("follow-unfollow-"+this.objId,this._onUnfollow)},_onFollow:function(){this._updateCounter({action:"follow"})},_onUnfollow:function(){this._updateCounter({action:"unfollow"})},_updateCounter:function(t){var l,n=o("html").attr("lang"),i=t.action;"follow"===i?l=(++this.options.num_followers).toLocaleString(n):"unfollow"===i&&(l=(--this.options.num_followers).toLocaleString(n)),this.options.num_followers<1e3?(this.counterEl.text(l),this.counterEl.removeAttr("title")):this.counterEl.attr("title",l)},teardown:function(){this.sandbox.unsubscribe("follow-follow-"+this.objId,this._onFollow),this.sandbox.unsubscribe("follow-unfollow-"+this.objId,this._onUnfollow)}}}));